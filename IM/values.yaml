mysql:
  enabled: true
  imageTag: "8.4"
  mysqlPassword: impass
  persistence:
    enabled: true
    storageClass: ""
    accessMode: ReadWriteOnce
    size: 8Gi
  # Do not modify the initializationFiles and mysqlUser values
  # unless you know what you are doing:
  # * dbnames must not be changed.
  # * mysqlUser must be granted in both dbs.
  mysqlUser: imuser
  initializationFiles:
    imweb.sql: |-
      CREATE DATABASE IF NOT EXISTS imweb;
      GRANT ALL PRIVILEGES ON imweb.* TO 'imuser'@'%';
    imdb.sql: |-
      CREATE DATABASE IF NOT EXISTS imdb;
      GRANT ALL PRIVILEGES ON imdb.* TO 'imuser'@'%';
    imdashdb.sql: |-
      CREATE DATABASE IF NOT EXISTS imdashdb;
      GRANT ALL PRIVILEGES ON imdashdb.* TO 'imuser'@'%';


#  Install MongoDB Community Operator first
# helm repo add mongodb https://mongodb.github.io/helm-charts
# helm install community-operator mongodb/community-operator --namespace mongodb --create-namespace --set operator.watchNamespace="*"
#  It is needed to create the RBAC resources in the target namespace
# git clone https://github.com/mongodb/mongodb-kubernetes-operator.git
# cd mongodb-kubernetes-operator
# kubectl apply -k config/rbac --namespace <my-namespace>
mongodb:
  enabled: false
  version: "8.0.17"
  architecture: replicaset
  replicaCount: 2
  arbiter:
    enabled: true
  auth:
    rootUser: root
    rootPassword: rootpass
  data:
    persistence:
      accessMode: ReadWriteOnce
      size: 8Gi
  log:
    persistence:
      accessMode: ReadWriteOnce
      size: 4Gi
  resources:
    requests:
      memory: 200Mi
      cpu: 500m
    limits:
      memory: 4Gi
      cpu: 2

imdashboard:
  deploy: false
  image: ghcr.io/grycap/im-dashboard
  version: latest
  ingress:
    enabled: true
    host: ""
    path: "/im-dashboard"
    tls: []
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
  oidc:
    name: name
    base_url: url
    client_id: id
    client_secret: sec
    group_membership: '[]'
    scopes: 'openid email profile offline_access eduperson_entitlement'
  support_email: root@server.com
  analytics_tag: ""
  loglevel: info
  static_sites: '[]'
  external_links: '[ { "url": "https://imdocs.readthedocs.io/", "menu_item_name": "IM Docs" },
                     { "url": "https://youtu.be/vmtzGOZxiUg", "menu_item_name": "IM Video Demo" }]'
  credentials_key: 'PXZ66574VjKIMSRXPWquRbcH8HaxH2yPRYsgZljlclA='

im:
  version: latest
  image: ghcr.io/grycap/im
  ingress:
    enabled: true
    host: ""
    path: "/im"
    tls: []
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
  # In case of using more than 1 replica
  # the IM will be launched in HA mode
  replicas: 1
  log:
    level: DEBUG
    persistence:
      enabled: true
      storageclass: ""
      accessmode: ReadWriteOnce
      size: 8Gi
  # if you need to add values check: https://raw.githubusercontent.com/grycap/im/master/etc/im.cfg
  config: []

vault:
  enabled: false
  resources:
    resources:
      cpu: 250m
      memory: 256Mi
  dataStorage:
    storageClass: ""
  injector:
    enabled: false
