suite: test im ingress
templates:
  - im_ingress.yaml
tests:
  - name: test1
    set:
      im.replicas: 1
    asserts:
      - isKind:
          of: Ingress
      - equal:
          path: spec.rules[0].http.paths[0].backend.serviceName
          value: im-backend
      - equal:
          path: spec.rules[0].http.paths[0].backend.servicePort
          value: 8800
  - name: test2
    set:
      im.replicas: 2
    asserts:
      - isKind:
          of: Ingress
      - equal:
          path: spec.rules[0].http.paths[0].backend.serviceName
          value: im-load-balancer-svc
      - equal:
          path: spec.rules[0].http.paths[0].backend.servicePort
          value: 80
